/*!
 * v-drag v2.1.0
 * by Nil Vila
 */
function eventListener(a,t,e="add"){a.forEach(a=>{document[`${e}EventListener`](a,t)})}function returnPositionString(a,t,e){return`matrix(${a||"1, 0, 0, 1,"} ${t}, ${e})`}function updatePosition(a,t){window.data.relativeX=window.data.mouseX*a,window.data.relativeY=window.data.mouseY*t,window.data.move.style.transform=returnPositionString(window.data.matrix,window.data.matrixX+window.data.relativeX,window.data.matrixY+window.data.relativeY)}const callPositionUpdate={x(){updatePosition(!0,!1)},y(){updatePosition(!1,!0)},all(){updatePosition(!0,!0)}};function repeatRaf(){callPositionUpdate[window.data.axis](window.data),window.data.posAnimation=requestAnimationFrame(repeatRaf)}function setUpMovement(){window.data.move.classList.add(window.data.class.move),window.data.posAnimation=requestAnimationFrame(repeatRaf),eventListener(["mousemove","touchmove"],setUpMovement,"remove")}function getTransformValue(a,t){let e=Number(window.getComputedStyle(window.data.move)[t].replace("px",""));if("none"!==a){const o=a.match(/[0-9.-]+/g);e+=Number(o[8-t.length])}return e}function moveElementTransform(a,t,e){window.data.move.style.transform=a,window.data.move.style.left=t,window.data.move.style.top=e}function updateMousePosition(a){window.data.mouseX=(a.pageX||a.touches[0].pageX)-window.data.initialX,window.data.mouseY=(a.pageY||a.touches[0].pageY)-window.data.initialY}function dragStart(a,t,e,o){window.data.grab=a,window.data.move=t,window.data.axis=e,window.data.initialX=o.pageX||o.touches[0].pageX,window.data.initialY=o.pageY||o.touches[0].pageY,window.data.relativeX=0,window.data.relativeY=0;const n=window.getComputedStyle(window.data.move).transform;window.data.matrix="none"!==n&&n.match(/\d([^,]*,){4}/g);const d=getTransformValue(n,"left"),i=getTransformValue(n,"top");moveElementTransform(returnPositionString(window.data.matrix,d,i),0,0),window.data.matrixX=d,window.data.matrixY=i,window.data.grab.classList.add(window.data.class.down),eventListener(["mousemove","touchmove"],updateMousePosition),eventListener(["mousemove","touchmove"],setUpMovement)}function dragEnd(){cancelAnimationFrame(window.data.posAnimation),eventListener(["mousemove","touchmove"],setUpMovement,"remove"),moveElementTransform(window.data.matrix?returnPositionString(window.data.matrix,0,0):"none",`${window.data.matrixX+window.data.relativeX}px`,`${window.data.matrixY+window.data.relativeY}px`),window.data.grab.classList.remove(window.data.class.down),window.data.move.classList.remove(window.data.class.move),eventListener(["mousemove","touchmove"],updateMousePosition,"remove")}function isValidAxisValue(a){return!!["x","y","all"].includes(a)}function dragSetup(a,t){const e=t.value,o=e instanceof Object?e.handle:e;let n;n=e instanceof Object&&e.axis&&isValidAxisValue(e.axis)?e.axis:isValidAxisValue(t.arg)?t.arg:"all";const d=document.querySelectorAll(o);0!==d.length?(a.classList.add(window.data.class.usesHandle),d.forEach(t=>{t.classList.add(window.data.class.handle),t.onmousedown=(e=>dragStart(t,a,n,e)),t.ontouchstart=(e=>dragStart(t,a,n,e))})):(a.onmousedown=(t=>dragStart(a,a,n,t)),a.ontouchstart=(t=>dragStart(a,a,n,t))),a.classList.add(window.data.class.initial),eventListener(["mouseup","touchend"],dragEnd)}var index={install(a,t){if(window.data={},window.data.class={initial:"drag-draggable",usesHandle:"drag-uses-handle",handle:"drag-handle",down:"drag-down",move:"drag-move"},t){const a=t.eventClass;Object.keys(a).forEach(t=>{a[t]&&(window.data.class[t]=a[t])})}const e=document.createElement("style");e.innerHTML=`.${window.data.class.initial}{position:relative;}.${window.data.class.initial}:not(.${window.data.class.usesHandle}),.${window.data.class.handle}{cursor:move;cursor:grab;cursor:-webkit-grab;cursor:-moz-grab;}.${window.data.class.handle}.${window.data.class.down},.${window.data.class.initial}:not(.${window.data.class.usesHandle}).${window.data.class.down}{z-index:999;cursor:grabbing;cursor:-webkit-grabbing;cursor:-moz-grabbing;}`,document.body.appendChild(e),a.directive("drag",{inserted(a,t){dragSetup(a,t)},update(a,t){a.onmousedown=null,a.ontouchstart=null,(document.querySelectorAll(t.oldValue)||document.querySelectorAll(t.oldValue.handle)).forEach(t=>{t.onmousedown=null,t.ontouchstart=null,t.classList.remove(window.data.class.handle),a.classList.remove(window.data.class.usesHandle)}),dragSetup(a,t)}})}};export default index;
