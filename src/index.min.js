let data={axis:"all",isStyleAdded:!1,transform:{declared:!1,string:""},initialX:0,initialY:0,cursorInitialX:0,cursorInitialY:0},elements={grab:null,move:null},eventClass={initial:"drag-draggable",hasHandle:"drag-uses-handle",handle:"drag-handle",down:"drag-down",move:"drag-move"};function isObject(e,t,a){return e instanceof Object?t:a}function returnPositionString(e,t){return`matrix(${data.transform.string}, ${e}, ${t})`}function getPosition(e,t,a){let n=getMatrixSection(e),i=parseInt(window.getComputedStyle(t)[a].slice(0,-2));return"left"===a&&"none"!==e?i+=parseInt(e.slice(n[3]+2,n[4])):"top"===a&&"none"!==e&&(i+=parseInt(e.slice(n[4]+2,-1))),i}function getMousePosition(e){return{x:(e.pageX||e.touches[0].pageX)-data.cursorInitialX,y:(e.pageY||e.touches[0].pageY)-data.cursorInitialY}}function getMatrixSection(e){let t,a=[];for(t=0;t<e.length;t++)","===e[t]&&a.push(t);return a}function dragDown(e,t,a,n){let i=e.value;elements.grab=t,elements.move=a,data.cursorInitialX=n.pageX||n.touches[0].pageX,data.cursorInitialY=n.pageY||n.touches[0].pageY,data.relativeX=0,data.relativeY=0;let s=window.getComputedStyle(a).transform;"none"==s?(data.transform.declared=!1,data.transform.string="1, 0, 0, 1"):(data.transform.declared=!0,data.transform.string=s.slice(7,getMatrixSection(s)[3]));let o=isObject(i,i.axis,e.arg);"x"!=o&&"y"!=o&&(o="all"),data.axis=o,data.initialX=getPosition(s,a,"left"),data.initialY=getPosition(s,a,"top"),a.style.transform=returnPositionString(data.initialX,data.initialY),a.style.left=0,a.style.top=0,t.classList.add(eventClass.down),document.addEventListener("mousemove",updatePosition[o]),document.addEventListener("touchmove",updatePosition[o])}const updatePosition={addClass:function(){elements.move.classList.add(eventClass.move),updatePosition.addClass=function(){}},x:function(e){let t=getMousePosition(e);updatePosition.addClass(),data.relativeX=t.x,elements.move.style.transform=returnPositionString(data.initialX+t.x,data.initialY)},y:function(e){let t=getMousePosition(e);updatePosition.addClass(),data.relativeY=t.y,elements.move.style.transform=returnPositionString(data.initialX,data.initialY+t.y)},all:function(e){let t=getMousePosition(e);updatePosition.addClass(),data.relativeX=t.x,data.relativeY=t.y,elements.move.style.transform=returnPositionString(data.initialX+t.x,data.initialY+t.y)}};function dragUp(){elements.move&&(elements.move.style.transform=data.transform.declared?returnPositionString(0,0):"none",elements.move.style.left=data.initialX+data.relativeX+"px",elements.move.style.top=data.initialY+data.relativeY+"px",updatePosition.addClass=function(){elements.move.classList.add(eventClass.move),updatePosition.addClass=function(){}},elements.grab.classList.remove(eventClass.down),elements.move.classList.remove(eventClass.move),document.removeEventListener("mousemove",updatePosition[data.axis]),document.removeEventListener("touchmove",updatePosition[data.axis]))}function createDraggable(e,t,a){let n,i,s,o=t.value;if(!data.isStyleAdded){data.isStyleAdded=!0;let e=document.createElement("style");e.innerHTML=`.${eventClass.initial}{position:relative;}.${eventClass.initial}:not(.${eventClass.hasHandle}),.${eventClass.handle}{cursor:move;cursor:grab;cursor:-webkit-grab;cursor:-moz-grab;}.${eventClass.handle}.${eventClass.down},.${eventClass.initial}:not(.${eventClass.hasHandle}).${eventClass.down}{z-index:999;cursor:grabbing;cursor:-webkit-grabbing;cursor:-moz-grabbing;}`,document.body.appendChild(e)}n=isObject(o,o.handle,o);let l=document.getElementById(n);o&&!l&&o.handle?console.error(`Element with id “${o.handle||o}” doesn’t exist`):(l?(i=l,(s=e).classList.add(eventClass.hasHandle),i.classList.add(eventClass.handle)):(i=e,s=e),s.classList.add(eventClass.initial),i.onmousedown=(e=>dragDown(t,i,s,e)),i.ontouchstart=(e=>dragDown(t,i,s,e))),document.addEventListener("mouseup",dragUp),document.addEventListener("touchend",dragUp)}const vDrag={install(e,t){if(t){let e=t.eventClass;for(let t in eventClass)e[t]&&(eventClass[t]=e[t])}e.directive("drag",{inserted:function(e,t,a){createDraggable(e,t,a)},update:function(e,t,a,n,i){createDraggable(e,t,a)}})}};"undefined"!=typeof window&&window.Vue?window.Vue.use(vDrag):module.exports=vDrag;